<!DOCTYPE html>
<html lang="en">

<head>
    <title>COWIN APP By Xposedloot</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <style>
        body{
	background: #25283D;
	font-family: roboto,Arial;
}
::-webkit-calendar-picker-indicator {
    filter: invert(1);
}
    .btn-primary {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
    padding: .375rem .75rem;
    display: inline-block;
    vertical-align: middle;
    text-align: center;
    border-radius: .25rem;
    width: 100px;
    display: flex;
    justify-content: center;
}


.search-box{
    height: 40px;
    display: flex;
    background-color: #2C3A47;
    border-radius: 18px;
    margin: 100px auto 30px;
    justify-content: center;
    width: max-content;
}

.search-box button{
  width: 40px;
  height:40px ;
  border-radius: 50%;
  border:none;
  color:#2C3A47;
  outline: 0;
}

.search-box input{
  border:none;
  outline:0px;
  text-align: center;
  padding: 0px 0px 0px 0px;
  background-color:transparent;
  border-radius: 18px;
  color:#fff;
  font-size: 20px;
  width: 0px;
  box-sizing: border-box;
  transition: .3s;
}
.input-box
{
  border:none;
  outline:0px;
  padding: 0px 0px 0px 0px;
}

.search-box input:hover{
   text-align: center;
}

.search-box button:hover{
   cursor: Text;
}

.search-box:hover .text {
  width:240px;
  text-align: center;
  padding-right: 10px;
}

.search-box:hover .text::placeholder {
    color: #fff;
    padding-right: 10px;
}

.input-box input:focus
{
    width: 480px;
}


</style>
</head>

<body>        
<div class="container">
          <div class="search-box">
              <div class="input-box">
            <input class="text" type="text" placeholder="Enter Pin code" id="pin"> 
            <input class="text" type="date" name="datepicker" id="datepicker" onchange="getDate(this.value)">
            <button id="searchbtn"> <i class="fa fa-search"></i></button>
        </div></div>
    </div>
        <div class="container table-responsive text-nowrap">
        <table class="table table-dark table-striped" id="session">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Date</th>
                    <th scope="col">18+</th>
                    <th scope="col">45+</th>
                    <th scope="col">Fee</th>
                    <th scope="col">Vaccine</th>
                    <th scope="col">Book Slot</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div></div>
<script>
        var formatted_date = '';
        function getDate(selected_date){
            formatted_date = moment(selected_date).format("DD-MM-YYYY")
        }
        $("#searchbtn").click(function () {
            var pin = $('#pin').val();
            if (pin == '' || pin == undefined) {
                alert('please enter pin code');
                return;
            }
            $.get("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode=" + pin +
                "&date=" + formatted_date,
                function (data, status) {
                    if (status) {
                        var sessions = data.sessions ? data.sessions : [];
                        if (sessions) {
                            $('#session tbody').empty();
                            for (var i = 0; i < sessions.length; i++) {
                                var classname = "btn-primary";
                                if (i % 2 == 0) {
                                    classname = "btn-primary"
                                }
                                $('#session tbody').append("<tr><td>" + sessions[i]
                                    .name + "</td><td>" + sessions[i].date + "</td><td>" + sessions[i].available_capacity + "</td><td>" +
        sessions[i].available_capacity_dose1 + "</td><td>" +sessions[i].fee_type + "</td><td>" +sessions[i].vaccine + "</td><td><a class=" + classname + " href='https://selfregistration.cowin.gov.in/'>Book Slot</a></td></tr>")
                            }
                        }
                    } else {
                        alert('error');
                    }

                });
        });

    
</script>
</body>

</html>
